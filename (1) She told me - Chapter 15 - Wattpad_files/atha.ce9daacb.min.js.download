var __atha=function(){function p(e,a){window.te.push("event","ad","internal",null,e,a)}function l(e,a,d,t,i){var s=wattpad.utils.getDeviceType(),n=wattpad.utils.generateUUID(),r=_.get(window,"wattpad.testGroups.GDPR_USER",!1),w={id:n,created_at:(new Date).toISOString(),username:wattpad.utils.getCurrentUserAttr("username"),external_id:wattpad.utils.getCurrentUserAttr("externalId"),country_code:wattpad.userCountryCode,app_version:wattpad.revision,platform:"mobile"===s?"mobile-web":"desktop-web",gdpr_is_eu:r,storyid:a,page:e,is_brand_safe:window.ads.is_brand_safe,is_mature:window.ads.is_mature,content_rating:window.ads.content_rating,brand_safety_source:window.ads.brand_safety_source,brand_safety_level:window.ads.brand_safety_level,variation:function(){var e=wattpad.isWpWeb,a=[];return wattpad.testGroups.DELAY_ADS&&a.push("image_moderation=true"),wattpad.testGroups.PREBID_BETA&&a.push("pb_beta=true"),wattpad.testGroups.EXCLUDE_PREBID_PARTNERS&&a.push("exclude_prebid_partners=true"),wattpad.testGroups.USE_KEVEL&&a.push("use_kevel=true"),wattpad.testGroups.USE_33ACROSS&&a.push("use_33across=true"),wattpad.testGroups.USE_IMAGE_MOD&&a.push("use_image_mod=true"),e&&a.push("wpweb=true"),a.join("&")}()};return void 0!==t&&(w.is_brand_safe=!!t.isBrandSafe,w.is_mature=wattpad.utils.isMatureStory(t),w.brand_safety_source=t.brandSafetySource,w.brand_safety_level=t.brandSafetyLevel),void 0!==i&&(w.brand_safety_source=i.brandSafetySource,w.brand_safety_level=i.brandSafetyLevel),void 0!==d&&(w.partid=d),w}var f="start_time";return{sendPageView:function(e,a,d,t,i){window.ads=window.ads||{};var s=l(e,a,d,t,i);return window.ads.page=e,window.ads.story_id=a,window.ads.part_id=d,window.ads.page_view_id=s.id,window.ads.is_brand_safe=s.is_brand_safe,window.ads.is_mature=s.is_mature,window.ads.content_rating=s.content_rating,window.ads.brand_safety_level=s.brand_safety_level,window.ads.brand_safety_source=s.brand_safety_source,s.user_is_premium=!!wattpad.utils.getCurrentUserAttr("isPremium"),s.story_tags=t&&Array.isArray(t.tags)?t.tags.join(" "):"",s.is_paid_story=t?t.isPaywalled:void 0,s.device_type=wattpad.utils.getDeviceType(),p("page_view",s),s.id},sendRequest:function(e,a,d){window.ads=window.ads||{},window.ads[e]=window.ads[e]||{};var t=window.ads[e].page=window.ads.page,i=window.ads[e].story_id=window.ads.story_id,s=window.ads[e].part_id=window.ads.part_id,n=0;window.ads[e].hasOwnProperty(f)?n=Date.now()-window.ads[e][f]:window.ads[e][f]=Date.now();var r=l(t,i,s);return r.zone_id=d.zoneId?d.zoneId.toString():d.zone?d.zone.toString():"",r.placement=d.htSlotName||d.placement_name,r.page_view_id=window.ads.page_view_id,r.adunit_id=e,r.request_offset=n,r.ad_partner=window.ads[e].ad_partner=a,window.ads[e][a+"_request"]=r.id,p("request",r),r.id},sendBid:function(e,a,d,t){var i=window.ads[e].page,s=window.ads[e].story_id,n=window.ads[e].part_id,r=window.ads[e].ad_partner,w=window.ads[e][r+"_request"],_=l(i,s,n),o=Date.now()-window.ads[e][f];return _.ad_partner=r,_.page_view_id=window.ads.page_view_id,_.adunit_id=e,_.partner_id=a,_.price=d,_.dimensions=t,_.request_id=w,_.request_offset=o,p("bid",_),_.id},sendAuctionResult:function(e,a,d){var t=window.ads[e].page,i=window.ads[e].story_id,s=window.ads[e].part_id,n=window.ads[e].ad_partner,r=Date.now()-window.ads[e][f],w=l(t,i,s);return w.ad_partner=n,w.page_view_id=window.ads.page_view_id,w.request_id=window.ads[e][n+"_request"],w.adunit_id=e,w.num_bids=d?d.length:0,w.price=a?a.bic:0,w.best_bid_id=a?a.id:null,w.request_offset=r,p("auction_result",w),w.id},sendImpression:function(e,a,d,t,i){var s=window.ads[e].page,n=window.ads[e].story_id,r=window.ads[e].part_id,w=window.ads[e].ad_partner,_=window.ads[e][w+"_request"],o=l(s,n,r),u=Date.now()-window.ads[e][f];return o.ad_partner=w,o.page_view_id=window.ads.page_view_id,o.adunit_id=e,o.price=t,o.adunit_format=i,o.request_id=_,o.placement=e.split("-")[0],o.zone_id=a,o.flight_id=d,o.request_offset=u,p("impression",o),o.id},sendSkip:function(e,a,d,t){var i=window.ads.page,s=window.ads.story_id,n=window.ads.part_id,r=l(i,s,n,d,t);return r.adunit_id=e,r.placement=e.split("-")[0],r.placement_type=e.split("-")[0],r.page_view_id=window.ads.page_view_id,r.ad_skip_reason=a,p("ad_skip",r),r.id}}}();"undefined"!=typeof module&&(module.exports=__atha);
//# sourceMappingURL=atha.ce9daacb.min.js.map
